{"ast":null,"code":"import { FormGroup, Validators, FormControl } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../../services/countries.service\";\nimport * as i3 from \"../../../services/manage-data.service\";\nimport * as i4 from \"../../../services/alerts.service\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/material/form-field\";\nimport * as i7 from \"@angular/material/input\";\nimport * as i8 from \"@angular/common\";\nimport * as i9 from \"@angular/material/icon\";\nimport * as i10 from \"@angular/material/select\";\nimport * as i11 from \"@angular/material/core\";\nimport * as i12 from \"@angular/material/button\";\n\nfunction ManageClientsComponent_mat_error_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" El nombre es \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"requerido\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction ManageClientsComponent_mat_error_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" El apellido es \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"requerido\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction ManageClientsComponent_mat_error_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" El email es \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"requerido\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction ManageClientsComponent_mat_error_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" El n\\u00FAmero de tel\\u00E9fono es \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"requerido\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction ManageClientsComponent_mat_error_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" La calle es \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"requerida\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction ManageClientsComponent_mat_error_42_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" El n\\u00FAmero es \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"requerido\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction ManageClientsComponent_mat_error_50_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" El pa\\u00EDs es \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"requerido\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction ManageClientsComponent_mat_error_55_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" La provincia es \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"requerida\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction ManageClientsComponent_mat_form_field_57_mat_option_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 21);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const city_r12 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", city_r12);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", city_r12, \" \");\n  }\n}\n\nfunction ManageClientsComponent_mat_form_field_57_mat_error_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Field City is \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"required\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction ManageClientsComponent_mat_form_field_57_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-form-field\", 3)(1, \"mat-label\");\n    i0.ɵɵtext(2, \"Select City\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"mat-select\", 19)(4, \"mat-option\");\n    i0.ɵɵtext(5, \"--\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, ManageClientsComponent_mat_form_field_57_mat_option_6_Template, 2, 2, \"mat-option\", 20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, ManageClientsComponent_mat_form_field_57_mat_error_7_Template, 4, 0, \"mat-error\", 5);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r8.cities);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r8.clientForm.controls[\"city\"].invalid);\n  }\n}\n\nfunction ManageClientsComponent_mat_form_field_58_mat_error_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" La ciudad es \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"requerida\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction ManageClientsComponent_mat_form_field_58_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-form-field\", 3)(1, \"mat-label\");\n    i0.ɵɵtext(2, \"Ciudad\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 22);\n    i0.ɵɵtemplate(4, ManageClientsComponent_mat_form_field_58_mat_error_4_Template, 4, 0, \"mat-error\", 5);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r9.clientForm.controls[\"city\"].invalid);\n  }\n}\n\nexport let ManageClientsComponent = /*#__PURE__*/(() => {\n  class ManageClientsComponent {\n    constructor(formBuilder, _countriesService, _manageDataService, _alertsService, activatedRoute, router) {\n      this.formBuilder = formBuilder;\n      this._countriesService = _countriesService;\n      this._manageDataService = _manageDataService;\n      this._alertsService = _alertsService;\n      this.activatedRoute = activatedRoute;\n      this.router = router;\n      this.countries = [];\n      this.states = [];\n      this.cities = [];\n      this.edit = false;\n      this.checkValue = true;\n      this.createForm();\n    }\n\n    ngOnInit() {\n      this.getCountries();\n      this.client = this.activatedRoute.snapshot.params;\n\n      if (this.client.id) {\n        this.edit = true;\n        this.loadForm();\n      }\n    }\n\n    createForm() {\n      this.clientForm = this.formBuilder.group({\n        firstName: new FormControl('', Validators.compose([Validators.required])),\n        lastName: new FormControl('', Validators.compose([Validators.required])),\n        email: new FormControl('', Validators.compose([Validators.required])),\n        phone: new FormControl('', Validators.compose([Validators.required])),\n        streetName: new FormControl('', Validators.compose([Validators.required])),\n        streetNumber: new FormControl('', Validators.compose([Validators.required])),\n        country: new FormControl('', Validators.compose([Validators.required])),\n        state: new FormControl('', Validators.compose([Validators.required])),\n        city: new FormControl('', Validators.compose([Validators.required]))\n      });\n    }\n\n    loadForm() {\n      this.clientForm.reset({\n        firstName: this.client.firstName,\n        lastName: this.client.lastName,\n        email: this.client.email,\n        phone: this.client.phone,\n        streetName: this.client.streetName,\n        streetNumber: this.client.streetNumber,\n        country: this.client.country,\n        state: this.client.state,\n        city: this.client.city\n      });\n    }\n\n    getCountries() {\n      this._countriesService.allCountries().subscribe(res => {\n        this.countries = res.Countries;\n      }, err => console.log(err));\n    }\n\n    setStates(i) {\n      this.states = this.countries[i].States;\n      this.cities = this.states[0].Cities;\n    }\n\n    setCities(i) {\n      this.cities = this.states[i].Cities;\n    }\n\n    onSubmit(values) {\n      if (this.clientForm.invalid) {\n        Object.values(this.clientForm.controls).forEach(control => {\n          if (control instanceof FormGroup) {\n            Object.values(control.controls).forEach(control => control.markAsTouched());\n          } else {\n            control.markAsTouched();\n          }\n        });\n        return;\n      }\n\n      if (!this.edit) {\n        this.addClient(values);\n      } else {\n        this.updateClient(values);\n      }\n    }\n\n    addClient(values) {\n      this._manageDataService.createRecord('clients', values).subscribe(res => {\n        if (res.success) {\n          this._alertsService.alertToast(res.msg, 'success').then(() => {\n            this.clientForm.reset();\n          });\n        }\n      }, err => {\n        let errorMsg = '';\n\n        if (err.error.msg) {\n          errorMsg = err.error.msg;\n        } else {\n          errorMsg = 'Lo sentimos, ha ocurrido un error. Intentá nuevamente.';\n        }\n\n        this._alertsService.alertToast(errorMsg, 'error');\n      });\n    }\n\n    updateClient(values) {\n      this._manageDataService.updateRecord('clients', this.client.id, values).subscribe(res => {\n        this._alertsService.alertToast('¡El cliente se modificó con éxito!', 'success').then(() => {\n          this.router.navigateByUrl('clients/list-clients');\n          this.clientForm.reset();\n          this.edit = false;\n        });\n      }, err => {\n        let errorMsg = '';\n\n        if (err.error.msg) {\n          errorMsg = err.error.msg;\n        } else {\n          errorMsg = 'Lo sentimos, ha ocurrido un error. Intentá nuevamente.';\n        }\n\n        this._alertsService.alertToast(errorMsg, 'error');\n      });\n    }\n\n  }\n\n  ManageClientsComponent.ɵfac = function ManageClientsComponent_Factory(t) {\n    return new (t || ManageClientsComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.CountriesService), i0.ɵɵdirectiveInject(i3.ManageDataService), i0.ɵɵdirectiveInject(i4.AlertsService), i0.ɵɵdirectiveInject(i5.ActivatedRoute), i0.ɵɵdirectiveInject(i5.Router));\n  };\n\n  ManageClientsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ManageClientsComponent,\n    selectors: [[\"app-manage-clients\"]],\n    decls: 61,\n    vars: 12,\n    consts: [[1, \"mat-elevation-z8\", \"form\", 3, \"formGroup\"], [1, \"text-divider\"], [1, \"row-form\"], [\"appearance\", \"outline\", 1, \"row-input\"], [\"matInput\", \"\", \"formControlName\", \"firstName\", \"placeholder\", \"Ingres\\u00E1 el nombre\"], [4, \"ngIf\"], [\"matInput\", \"\", \"formControlName\", \"lastName\", \"placeholder\", \"Ingres\\u00E1 el apellido\"], [\"appearance\", \"outline\", 1, \"full-width\"], [\"matInput\", \"\", \"formControlName\", \"email\", \"placeholder\", \"cliente@email.com\"], [\"matInput\", \"\", \"formControlName\", \"phone\", \"placeholder\", \"Ingres\\u00E1 un n\\u00FAmero de tel\\u00E9fono\"], [\"matSuffix\", \"\"], [\"matInput\", \"\", \"formControlName\", \"streetName\", \"placeholder\", \"Ingres\\u00E1 la calle\"], [\"appearance\", \"outline\", 1, \"stNumber\"], [\"matInput\", \"\", \"formControlName\", \"streetNumber\", \"placeholder\", \"Ingres\\u00E1 el n\\u00FAmero\"], [\"matInput\", \"\", \"formControlName\", \"country\", \"placeholder\", \"Ingres\\u00E1 el pa\\u00EDs\"], [\"matInput\", \"\", \"formControlName\", \"state\", \"placeholder\", \"Ingres\\u00E1 la provincia\"], [1, \"cityField\"], [\"appearance\", \"outline\", \"class\", \"row-input\", 4, \"ngIf\"], [\"mat-raised-button\", \"\", \"type\", \"button\", \"color\", \"primary\", 1, \"btn-submit\", \"full-width\", 3, \"click\"], [\"formControlName\", \"city\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [\"matInput\", \"\", \"formControlName\", \"city\", \"placeholder\", \"Ingres\\u00E1 la ciudad\"]],\n    template: function ManageClientsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"form\", 0)(1, \"div\", 1);\n        i0.ɵɵtext(2, \"Informaci\\u00F3n del cliente\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 2)(4, \"mat-form-field\", 3)(5, \"mat-label\");\n        i0.ɵɵtext(6, \"Nombre\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(7, \"input\", 4);\n        i0.ɵɵtemplate(8, ManageClientsComponent_mat_error_8_Template, 4, 0, \"mat-error\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"mat-form-field\", 3)(10, \"mat-label\");\n        i0.ɵɵtext(11, \"Apellido\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(12, \"input\", 6);\n        i0.ɵɵtemplate(13, ManageClientsComponent_mat_error_13_Template, 4, 0, \"mat-error\", 5);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(14, \"div\", 1);\n        i0.ɵɵtext(15, \"Informaci\\u00F3n de contacto\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"mat-form-field\", 7)(17, \"mat-label\");\n        i0.ɵɵtext(18, \"Email\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(19, \"input\", 8);\n        i0.ɵɵtemplate(20, ManageClientsComponent_mat_error_20_Template, 4, 0, \"mat-error\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"mat-form-field\", 7)(22, \"mat-label\");\n        i0.ɵɵtext(23, \"N\\u00FAmero de tel\\u00E9fono / celular\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(24, \"input\", 9);\n        i0.ɵɵelementStart(25, \"mat-icon\", 10);\n        i0.ɵɵtext(26, \"phone\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"mat-hint\");\n        i0.ɵɵtext(28, \"Incluir c\\u00F3digo de \\u00E1rea\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(29, ManageClientsComponent_mat_error_29_Template, 4, 0, \"mat-error\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"div\", 1);\n        i0.ɵɵtext(31, \"Informaci\\u00F3n del domicilio\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"div\", 2)(33, \"mat-form-field\", 3)(34, \"mat-label\");\n        i0.ɵɵtext(35, \"Calle\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(36, \"input\", 11);\n        i0.ɵɵtemplate(37, ManageClientsComponent_mat_error_37_Template, 4, 0, \"mat-error\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(38, \"mat-form-field\", 12)(39, \"mat-label\");\n        i0.ɵɵtext(40, \"N\\u00FAmero\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(41, \"input\", 13);\n        i0.ɵɵtemplate(42, ManageClientsComponent_mat_error_42_Template, 4, 0, \"mat-error\", 5);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(43, \"div\", 1);\n        i0.ɵɵtext(44, \"Pa\\u00EDs - Provincia - Ciudad\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(45, \"div\", 2)(46, \"mat-form-field\", 3)(47, \"mat-label\");\n        i0.ɵɵtext(48, \"Pa\\u00EDs\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(49, \"input\", 14);\n        i0.ɵɵtemplate(50, ManageClientsComponent_mat_error_50_Template, 4, 0, \"mat-error\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(51, \"mat-form-field\", 3)(52, \"mat-label\");\n        i0.ɵɵtext(53, \"Provincia\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(54, \"input\", 15);\n        i0.ɵɵtemplate(55, ManageClientsComponent_mat_error_55_Template, 4, 0, \"mat-error\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(56, \"div\", 16);\n        i0.ɵɵtemplate(57, ManageClientsComponent_mat_form_field_57_Template, 8, 2, \"mat-form-field\", 17);\n        i0.ɵɵtemplate(58, ManageClientsComponent_mat_form_field_58_Template, 5, 1, \"mat-form-field\", 17);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(59, \"button\", 18);\n        i0.ɵɵlistener(\"click\", function ManageClientsComponent_Template_button_click_59_listener() {\n          return ctx.onSubmit(ctx.clientForm.value);\n        });\n        i0.ɵɵtext(60);\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"formGroup\", ctx.clientForm);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngIf\", ctx.clientForm.controls[\"firstName\"].invalid);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ctx.clientForm.controls[\"lastName\"].invalid);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngIf\", ctx.clientForm.controls[\"email\"].invalid);\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngIf\", ctx.clientForm.controls[\"phone\"].invalid);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngIf\", ctx.clientForm.controls[\"streetName\"].invalid);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ctx.clientForm.controls[\"streetNumber\"].invalid);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngIf\", ctx.clientForm.controls[\"country\"].invalid);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ctx.clientForm.controls[\"state\"].invalid);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", !ctx.checkValue);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.checkValue);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\" \", ctx.edit ? \"Modificar cliente\" : \"Agregar cliente\", \" \");\n      }\n    },\n    directives: [i1.ɵNgNoValidate, i1.NgControlStatusGroup, i1.FormGroupDirective, i6.MatFormField, i6.MatLabel, i7.MatInput, i1.DefaultValueAccessor, i1.NgControlStatus, i1.FormControlName, i8.NgIf, i6.MatError, i9.MatIcon, i6.MatSuffix, i6.MatHint, i10.MatSelect, i11.MatOption, i8.NgForOf, i12.MatButton],\n    styles: [\".form[_ngcontent-%COMP%]{margin-top:25px;max-width:750px}.row-form[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap}.row-input[_ngcontent-%COMP%]{flex-grow:1;margin-right:15px}.row-input[_ngcontent-%COMP%]:last-of-type{margin-right:0}.stNumber[_ngcontent-%COMP%]{max-width:125px}.checkCity[_ngcontent-%COMP%]{margin:-5px 10px 0}.cityField[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:0;margin-bottom:5px;width:100%}@media (min-width: 768px){.cityField[_ngcontent-%COMP%]{margin-left:15px;width:auto}}\"]\n  });\n  return ManageClientsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}
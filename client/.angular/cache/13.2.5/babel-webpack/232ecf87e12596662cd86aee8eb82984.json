{"ast":null,"code":"import { FormGroup, Validators, FormControl } from '@angular/forms';\nimport { MatAccordion } from '@angular/material/expansion';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../../services/manage-data.service\";\nimport * as i3 from \"../../../services/auth.service\";\nimport * as i4 from \"../../../services/alerts.service\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/material/form-field\";\nimport * as i7 from \"@angular/material/select\";\nimport * as i8 from \"@angular/material/core\";\nimport * as i9 from \"@angular/common\";\nimport * as i10 from \"@angular/material/input\";\nimport * as i11 from \"@angular/material/datepicker\";\nimport * as i12 from \"@angular/material/button\";\nimport * as i13 from \"@angular/material/table\";\nimport * as i14 from \"@angular/material/icon\";\nimport * as i15 from \"@angular/material/expansion\";\nimport * as i16 from \"@angular/material/chips\";\n\nfunction ManageRepairsComponent_mat_option_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"mat-option\", 34);\n    i0.ɵɵlistener(\"click\", function ManageRepairsComponent_mat_option_10_Template_mat_option_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r18);\n      const client_r16 = restoredCtx.$implicit;\n      const ctx_r17 = i0.ɵɵnextContext();\n      return ctx_r17.email = client_r16.email;\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const client_r16 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", client_r16.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", client_r16.firstName, \" \", client_r16.lastName, \" \");\n  }\n}\n\nfunction ManageRepairsComponent_mat_error_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Seleccion\\u00E1 un cliente de la lista \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ManageRepairsComponent_mat_error_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Este campo es \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"requerido\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction ManageRepairsComponent_mat_error_41_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Este campo es \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"requerido\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction ManageRepairsComponent_mat_option_48_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 35);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const user_r19 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", user_r19.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(user_r19.name);\n  }\n}\n\nfunction ManageRepairsComponent_mat_error_49_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Este campo es \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"requerido\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction ManageRepairsComponent_mat_option_60_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"mat-option\", 34);\n    i0.ɵɵlistener(\"click\", function ManageRepairsComponent_mat_option_60_Template_mat_option_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r22);\n      const article_r20 = restoredCtx.$implicit;\n      const ctx_r21 = i0.ɵɵnextContext();\n      return ctx_r21.selectArticle(article_r20.code, article_r20.description);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const article_r20 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", article_r20.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(article_r20.description);\n  }\n}\n\nfunction ManageRepairsComponent_mat_error_61_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\")(1, \"strong\");\n    i0.ɵɵtext(2, \"Seleccion\\u00E1 un art\\u00EDculo a agregar\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction ManageRepairsComponent_mat_form_field_62_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-form-field\")(1, \"mat-label\");\n    i0.ɵɵtext(2, \"C\\u00F3digo del art\\u00EDculo\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 36);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ManageRepairsComponent_mat_form_field_63_mat_error_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Este campo es \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"requerido\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction ManageRepairsComponent_mat_form_field_63_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-form-field\")(1, \"mat-label\");\n    i0.ɵɵtext(2, \"Cantidad\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 37);\n    i0.ɵɵtemplate(4, ManageRepairsComponent_mat_form_field_63_mat_error_4_Template, 4, 0, \"mat-error\", 7);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r10.articlesForm.controls[\"amount\"].invalid);\n  }\n}\n\nfunction ManageRepairsComponent_button_64_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r25 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 38);\n    i0.ɵɵlistener(\"click\", function ManageRepairsComponent_button_64_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r25);\n      const ctx_r24 = i0.ɵɵnextContext();\n      return ctx_r24.addArticle(ctx_r24.articlesForm.value);\n    });\n    i0.ɵɵtext(1, \" Agregar \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ManageRepairsComponent_button_65_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 38);\n    i0.ɵɵlistener(\"click\", function ManageRepairsComponent_button_65_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r26 = i0.ɵɵnextContext();\n      return ctx_r26.cancelArticle();\n    });\n    i0.ɵɵtext(1, \" Cancelar \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ManageRepairsComponent_table_66_th_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 48);\n    i0.ɵɵtext(1, \" C\\u00F3digo \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ManageRepairsComponent_table_66_td_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 49);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r38 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r38.code, \" \");\n  }\n}\n\nfunction ManageRepairsComponent_table_66_th_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 48);\n    i0.ɵɵtext(1, \" Descripci\\u00F3n \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ManageRepairsComponent_table_66_td_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 49);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r39 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r39.descrip, \" \");\n  }\n}\n\nfunction ManageRepairsComponent_table_66_th_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 48);\n    i0.ɵɵtext(1, \" Cantidad \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ManageRepairsComponent_table_66_td_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 49);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r40 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r40.amount, \" \");\n  }\n}\n\nfunction ManageRepairsComponent_table_66_th_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"th\", 48);\n  }\n}\n\nfunction ManageRepairsComponent_table_66_td_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r43 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"td\", 49)(1, \"button\", 50);\n    i0.ɵɵlistener(\"click\", function ManageRepairsComponent_table_66_td_12_Template_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r43);\n      const element_r41 = restoredCtx.$implicit;\n      const ctx_r42 = i0.ɵɵnextContext(2);\n      return ctx_r42.deleteArticle(element_r41);\n    });\n    i0.ɵɵelementStart(2, \"mat-icon\");\n    i0.ɵɵtext(3, \"Eliminar\");\n    i0.ɵɵelementEnd()()();\n  }\n}\n\nfunction ManageRepairsComponent_table_66_tr_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 51);\n  }\n}\n\nfunction ManageRepairsComponent_table_66_tr_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 52);\n  }\n}\n\nfunction ManageRepairsComponent_table_66_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 39);\n    i0.ɵɵelementContainerStart(1, 40);\n    i0.ɵɵtemplate(2, ManageRepairsComponent_table_66_th_2_Template, 2, 0, \"th\", 41);\n    i0.ɵɵtemplate(3, ManageRepairsComponent_table_66_td_3_Template, 2, 1, \"td\", 42);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(4, 43);\n    i0.ɵɵtemplate(5, ManageRepairsComponent_table_66_th_5_Template, 2, 0, \"th\", 41);\n    i0.ɵɵtemplate(6, ManageRepairsComponent_table_66_td_6_Template, 2, 1, \"td\", 42);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(7, 44);\n    i0.ɵɵtemplate(8, ManageRepairsComponent_table_66_th_8_Template, 2, 0, \"th\", 41);\n    i0.ɵɵtemplate(9, ManageRepairsComponent_table_66_td_9_Template, 2, 1, \"td\", 42);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(10, 45);\n    i0.ɵɵtemplate(11, ManageRepairsComponent_table_66_th_11_Template, 1, 0, \"th\", 41);\n    i0.ɵɵtemplate(12, ManageRepairsComponent_table_66_td_12_Template, 4, 0, \"td\", 42);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵtemplate(13, ManageRepairsComponent_table_66_tr_13_Template, 1, 0, \"tr\", 46);\n    i0.ɵɵtemplate(14, ManageRepairsComponent_table_66_tr_14_Template, 1, 0, \"tr\", 47);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r13 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"dataSource\", ctx_r13.articleRepair);\n    i0.ɵɵadvance(13);\n    i0.ɵɵproperty(\"matHeaderRowDef\", ctx_r13.displayedColumns);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"matRowDefColumns\", ctx_r13.displayedColumns);\n  }\n}\n\nfunction ManageRepairsComponent_div_78_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 54)(1, \"div\")(2, \"span\");\n    i0.ɵɵtext(3, \"Descripci\\u00F3n: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"i\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\")(7, \"span\");\n    i0.ɵɵtext(8, \"Creada: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"i\");\n    i0.ɵɵtext(10);\n    i0.ɵɵpipe(11, \"date\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"div\")(13, \"span\");\n    i0.ɵɵtext(14, \"Actualizada: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"i\");\n    i0.ɵɵtext(16);\n    i0.ɵɵpipe(17, \"date\");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const obs_r46 = ctx.$implicit;\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(obs_r46.description);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(11, 3, obs_r46.createdAt, \"dd/MM/yyyy\"));\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(17, 6, obs_r46.updatedAt, \"dd/MM/yyyy\"));\n  }\n}\n\nfunction ManageRepairsComponent_div_78_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h5\")(2, \"strong\");\n    i0.ɵɵtext(3, \"Ultimas observaciones\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(4, ManageRepairsComponent_div_78_div_4_Template, 18, 9, \"div\", 53);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r14 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r14.observations);\n  }\n}\n\nfunction ManageRepairsComponent_button_84_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r48 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 55);\n    i0.ɵɵlistener(\"click\", function ManageRepairsComponent_button_84_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r48);\n      const ctx_r47 = i0.ɵɵnextContext();\n      return ctx_r47.addObservation();\n    });\n    i0.ɵɵtext(1, \" Agregar \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport let ManageRepairsComponent = /*#__PURE__*/(() => {\n  class ManageRepairsComponent {\n    constructor(formBuilder, _manageDataService, _authService, _alertsService, activatedRoute, router) {\n      this.formBuilder = formBuilder;\n      this._manageDataService = _manageDataService;\n      this._authService = _authService;\n      this._alertsService = _alertsService;\n      this.activatedRoute = activatedRoute;\n      this.router = router;\n      this.email = '';\n      this.observations = [];\n      this.articleSelected = false;\n      this.articleRepair = [];\n      this.edit = false;\n      this.displayedColumns = ['code', 'descrip', 'amount', 'iconDelete'];\n      this.todayDate = new Date();\n      this.createForm();\n    }\n\n    ngOnInit() {\n      this.getUsers();\n      this.getClients();\n      this.getArticles();\n\n      this._authService.authSubject.subscribe(state => {\n        this.takenId = state.id;\n      });\n\n      let repair = this.activatedRoute.snapshot.params;\n\n      if (repair.idRepair) {\n        this.edit = true;\n\n        this._manageDataService.getDataById('repairs', repair.idRepair).subscribe(res => {\n          this.repair = res[0];\n          this.repair.Articles.map(art => {\n            let article = {\n              id: art.id,\n              code: art.code,\n              descrip: art.description,\n              amount: art.ArticlesRepairs.amount\n            };\n            this.articleRepair.push(article);\n          });\n          this.loadForm();\n        });\n      }\n    }\n\n    getUsers() {\n      this._manageDataService.getData('users').subscribe(res => {\n        this.users = res.users;\n      });\n    }\n\n    getClients() {\n      this._manageDataService.getData('clients').subscribe(res => {\n        this.clients = res.clients;\n      });\n    }\n\n    getArticles() {\n      this._manageDataService.getData('articles').subscribe(res => {\n        this.articles = res.articles;\n      });\n    }\n\n    createForm() {\n      this.repairForm = this.formBuilder.group({\n        clientId: new FormControl('', Validators.compose([Validators.required])),\n        description: new FormControl('', Validators.compose([Validators.required])),\n        estDate: new FormControl('', Validators.compose([Validators.required])),\n        state: new FormControl('', Validators.compose([Validators.required])),\n        assignedId: new FormControl('', Validators.compose([Validators.required])),\n        observations: new FormControl('')\n      });\n      this.articlesForm = this.formBuilder.group({\n        id: new FormControl('', Validators.compose([Validators.required])),\n        code: new FormControl('', Validators.compose([Validators.required])),\n        descrip: new FormControl('', Validators.compose([Validators.required])),\n        amount: new FormControl('', Validators.compose([Validators.required]))\n      });\n    }\n\n    loadForm() {\n      this.repairForm.reset({\n        clientId: this.repair.ClientId,\n        description: this.repair.description,\n        estDate: this.repair.estDate,\n        state: this.repair.state,\n        assignedId: this.repair.assignedId\n      });\n      this.email = this.repair.Client.email;\n      this.observations = this.repair.Observations;\n    }\n\n    selectArticle(code, descrip) {\n      this.articleSelected = true;\n      this.articlesForm.controls.code.setValue(code);\n      this.articlesForm.controls.descrip.setValue(descrip);\n    }\n\n    cancelArticle() {\n      this.articleSelected = false;\n      this.articlesForm.reset();\n    }\n\n    addArticle(values) {\n      if (this.articlesForm.invalid) {\n        this.articlesForm.controls.amount.markAsTouched();\n        return;\n      }\n\n      if (this.articleRepair.length > 0) {\n        let match = false;\n        this.articleRepair.map(art => {\n          if (art.id == values.id) {\n            art.amount = Number(art.amount) + Number(values.amount);\n            match = true;\n          }\n        });\n\n        if (!match) {\n          this.articleRepair.push(values);\n          this.articleRepair = [...this.articleRepair];\n        }\n      } else {\n        this.articleRepair.push(values);\n        this.articleRepair = [...this.articleRepair];\n      }\n\n      this.cancelArticle();\n    }\n\n    deleteArticle(article) {\n      this.articleRepair = this.articleRepair.filter(e => e.id !== article.id);\n      this.articleRepair = [...this.articleRepair];\n    }\n\n    onSubmit(values) {\n      if (this.repairForm.invalid) {\n        Object.values(this.repairForm.controls).forEach(control => {\n          if (control instanceof FormGroup) {\n            Object.values(control.controls).forEach(control => control.markAsTouched());\n          } else {\n            control.markAsTouched();\n          }\n        });\n        return;\n      }\n\n      values.takenId = Number(this.takenId);\n      values = Object.assign(Object.assign({}, values), {\n        articles: this.articleRepair\n      });\n\n      if (!this.edit) {\n        this.addRepair(values);\n      } else {\n        this.updateRepair(values);\n      }\n    }\n\n    addRepair(values) {\n      this._manageDataService.createRecord('repairs', values).subscribe(res => {\n        if (res.success) {\n          this._alertsService.alertToast(res.msg, 'success').then(() => {\n            this.articleRepair = [];\n            this.articleRepair = [...this.articleRepair];\n            this.email = '';\n            this.repairForm.reset();\n          });\n        }\n      }, err => {\n        let errorMsg = '';\n\n        if (err.error.msg) {\n          errorMsg = err.error.msg;\n        } else {\n          errorMsg = 'Lo sentimos, ha ocurrido un error. Intentá nuevamente.';\n        }\n\n        this._alertsService.alertToast(errorMsg, 'error');\n      });\n    }\n\n    updateRepair(values) {\n      this._manageDataService.updateRecord('repairs', this.repair.id, values).subscribe(res => {\n        this._alertsService.alertToast('¡La reparación se modificó con éxito!', 'success').then(() => {\n          this.router.navigateByUrl('repairs/list-repairs');\n          this.repairForm.reset();\n          this.edit = false;\n        });\n      }, err => {\n        let errorMsg = '';\n\n        if (err.error.msg) {\n          errorMsg = err.error.msg;\n        } else {\n          errorMsg = 'Lo sentimos, ha ocurrido un error. Intentá nuevamente.';\n        }\n\n        this._alertsService.alertToast(errorMsg, 'error');\n      });\n    }\n\n    addObservation() {\n      if (this.repairForm.controls['observations'].value === null) return;\n      let values = {\n        RepairId: this.repair.id,\n        description: this.repairForm.controls['observations'].value\n      };\n\n      this._manageDataService.createRecord('observations', values).subscribe(res => {\n        if (res.success) {\n          this._alertsService.alertToast(res.msg, 'success');\n\n          this.observations.push(res.obs);\n          this.repairForm.controls['observations'].reset();\n        }\n      }, err => {\n        let errorMsg = '';\n\n        if (err.error.msg) {\n          errorMsg = err.error.msg;\n        } else {\n          errorMsg = 'Lo sentimos, ha ocurrido un error. Intentá nuevamente.';\n        }\n\n        this._alertsService.alertToast(errorMsg, 'error');\n      });\n    }\n\n  }\n\n  ManageRepairsComponent.ɵfac = function ManageRepairsComponent_Factory(t) {\n    return new (t || ManageRepairsComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ManageDataService), i0.ɵɵdirectiveInject(i3.AuthService), i0.ɵɵdirectiveInject(i4.AlertsService), i0.ɵɵdirectiveInject(i5.ActivatedRoute), i0.ɵɵdirectiveInject(i5.Router));\n  };\n\n  ManageRepairsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ManageRepairsComponent,\n    selectors: [[\"app-manage-repairs\"]],\n    viewQuery: function ManageRepairsComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(MatAccordion, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.accordion = _t.first);\n      }\n    },\n    decls: 87,\n    vars: 25,\n    consts: [[1, \"mat-elevation-z8\", \"form\", 3, \"formGroup\"], [1, \"text-divider\"], [1, \"row-form\"], [\"appearance\", \"outline\"], [\"formControlName\", \"clientId\", \"required\", \"\"], [3, \"click\"], [3, \"value\", \"click\", 4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [\"appearance\", \"outline\", 1, \"row-input\"], [\"matInput\", \"\", \"disabled\", \"\", 3, \"value\"], [\"appearance\", \"outline\", 1, \"full-width\"], [\"matInput\", \"\", \"formControlName\", \"description\", \"placeholder\", \"Ingres\\u00E1 el motivo/descripci\\u00F3n de la reparaci\\u00F3n\"], [\"color\", \"accent\", \"appearance\", \"outline\"], [\"matInput\", \"\", \"formControlName\", \"estDate\", 3, \"min\", \"matDatepicker\"], [\"matSuffix\", \"\", 3, \"for\"], [\"datePicker\", \"\"], [\"formControlName\", \"state\"], [\"value\", \"open\"], [\"value\", \"pending\"], [\"value\", \"closed\"], [\"formControlName\", \"assignedId\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"formGroup\"], [\"formControlName\", \"id\", 3, \"closed\"], [\"mat-raised-button\", \"\", \"type\", \"button\", \"color\", \"primary\", \"class\", \"btn-article\", 3, \"click\", 4, \"ngIf\"], [\"mat-table\", \"\", \"class\", \"mat-elevation-z1\", 3, \"dataSource\", 4, \"ngIf\"], [1, \"example-headers-align\"], [1, \"spacer\"], [\"aria-label\", \"Fish selection\"], [\"appearance\", \"outline\", 1, \"fieldTextarea\"], [1, \"infix\"], [\"matInput\", \"\", \"rows\", \"3\", \"formControlName\", \"observations\", 1, \"textarea\"], [\"mat-raised-button\", \"\", \"type\", \"button\", \"class\", \"btn-obs\", 3, \"click\", 4, \"ngIf\"], [\"mat-raised-button\", \"\", \"type\", \"button\", \"color\", \"primary\", 1, \"btn-submit\", \"full-width\", 3, \"click\"], [3, \"value\", \"click\"], [3, \"value\"], [\"matInput\", \"\", \"formControlName\", \"code\", \"readonly\", \"\"], [\"matInput\", \"\", \"formControlName\", \"amount\"], [\"mat-raised-button\", \"\", \"type\", \"button\", \"color\", \"primary\", 1, \"btn-article\", 3, \"click\"], [\"mat-table\", \"\", 1, \"mat-elevation-z1\", 3, \"dataSource\"], [\"matColumnDef\", \"code\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [\"matColumnDef\", \"descrip\"], [\"matColumnDef\", \"amount\"], [\"matColumnDef\", \"iconDelete\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"mat-header-cell\", \"\"], [\"mat-cell\", \"\"], [\"mat-button\", \"\", 3, \"click\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\"], [\"class\", \"obsContainer\", 4, \"ngFor\", \"ngForOf\"], [1, \"obsContainer\"], [\"mat-raised-button\", \"\", \"type\", \"button\", 1, \"btn-obs\", 3, \"click\"]],\n    template: function ManageRepairsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"form\", 0)(1, \"div\", 1);\n        i0.ɵɵtext(2, \"Informaci\\u00F3n del cliente\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 2)(4, \"mat-form-field\", 3)(5, \"mat-label\");\n        i0.ɵɵtext(6, \"Nombre del cliente\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"mat-select\", 4)(8, \"mat-option\", 5);\n        i0.ɵɵlistener(\"click\", function ManageRepairsComponent_Template_mat_option_click_8_listener() {\n          return ctx.email = \"\";\n        });\n        i0.ɵɵtext(9, \"--\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(10, ManageRepairsComponent_mat_option_10_Template, 2, 3, \"mat-option\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(11, ManageRepairsComponent_mat_error_11_Template, 2, 0, \"mat-error\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"mat-form-field\", 8)(13, \"mat-label\");\n        i0.ɵɵtext(14, \"Email del cliente\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(15, \"input\", 9);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(16, \"div\", 1);\n        i0.ɵɵtext(17, \"Informaci\\u00F3n de la reparaci\\u00F3n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"mat-form-field\", 10)(19, \"mat-label\");\n        i0.ɵɵtext(20, \"Motivo\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(21, \"input\", 11);\n        i0.ɵɵtemplate(22, ManageRepairsComponent_mat_error_22_Template, 4, 0, \"mat-error\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"div\", 2)(24, \"mat-form-field\", 12)(25, \"mat-label\");\n        i0.ɵɵtext(26, \"Fecha estimada de finalizaci\\u00F3n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(27, \"input\", 13)(28, \"mat-datepicker-toggle\", 14)(29, \"mat-datepicker\", null, 15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"mat-form-field\", 8)(32, \"mat-label\");\n        i0.ɵɵtext(33, \"Estado\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(34, \"mat-select\", 16)(35, \"mat-option\", 17);\n        i0.ɵɵtext(36, \"Abierto\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(37, \"mat-option\", 18);\n        i0.ɵɵtext(38, \"Pendiente\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(39, \"mat-option\", 19);\n        i0.ɵɵtext(40, \"Cerrado\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(41, ManageRepairsComponent_mat_error_41_Template, 4, 0, \"mat-error\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(42, \"mat-form-field\", 8)(43, \"mat-label\");\n        i0.ɵɵtext(44, \"Asignado a\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(45, \"mat-select\", 20)(46, \"mat-option\");\n        i0.ɵɵtext(47, \"--\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(48, ManageRepairsComponent_mat_option_48_Template, 2, 2, \"mat-option\", 21);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(49, ManageRepairsComponent_mat_error_49_Template, 4, 0, \"mat-error\", 7);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(50, \"div\", 1);\n        i0.ɵɵtext(51, \"Art\\u00EDculos usados (opcional)\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(52, \"form\", 22)(53, \"div\", 2)(54, \"mat-form-field\")(55, \"mat-label\");\n        i0.ɵɵtext(56, \"Agregar art\\u00EDculo\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(57, \"mat-select\", 23);\n        i0.ɵɵlistener(\"closed\", function ManageRepairsComponent_Template_mat_select_closed_57_listener() {\n          return !ctx.articleSelected && ctx.cancelArticle();\n        });\n        i0.ɵɵelementStart(58, \"mat-option\", 5);\n        i0.ɵɵlistener(\"click\", function ManageRepairsComponent_Template_mat_option_click_58_listener() {\n          return !ctx.articleSelected && ctx.cancelArticle();\n        });\n        i0.ɵɵtext(59, \"--\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(60, ManageRepairsComponent_mat_option_60_Template, 2, 2, \"mat-option\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(61, ManageRepairsComponent_mat_error_61_Template, 3, 0, \"mat-error\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(62, ManageRepairsComponent_mat_form_field_62_Template, 4, 0, \"mat-form-field\", 7);\n        i0.ɵɵtemplate(63, ManageRepairsComponent_mat_form_field_63_Template, 5, 1, \"mat-form-field\", 7);\n        i0.ɵɵtemplate(64, ManageRepairsComponent_button_64_Template, 2, 0, \"button\", 24);\n        i0.ɵɵtemplate(65, ManageRepairsComponent_button_65_Template, 2, 0, \"button\", 24);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(66, ManageRepairsComponent_table_66_Template, 15, 3, \"table\", 25);\n        i0.ɵɵelementStart(67, \"div\", 1);\n        i0.ɵɵtext(68, \"Observaciones\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(69, \"mat-accordion\", 26)(70, \"mat-expansion-panel\")(71, \"mat-expansion-panel-header\")(72, \"mat-panel-title\");\n        i0.ɵɵtext(73);\n        i0.ɵɵelement(74, \"span\", 27);\n        i0.ɵɵelementStart(75, \"mat-chip-list\", 28)(76, \"mat-chip\");\n        i0.ɵɵtext(77);\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵtemplate(78, ManageRepairsComponent_div_78_Template, 5, 1, \"div\", 7);\n        i0.ɵɵelementStart(79, \"mat-form-field\", 29)(80, \"mat-label\");\n        i0.ɵɵtext(81, \"Descripci\\u00F3n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(82, \"div\", 30);\n        i0.ɵɵelement(83, \"textarea\", 31);\n        i0.ɵɵtemplate(84, ManageRepairsComponent_button_84_Template, 2, 0, \"button\", 32);\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(85, \"button\", 33);\n        i0.ɵɵlistener(\"click\", function ManageRepairsComponent_Template_button_click_85_listener() {\n          return ctx.onSubmit(ctx.repairForm.value);\n        });\n        i0.ɵɵtext(86);\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        const _r3 = i0.ɵɵreference(30);\n\n        i0.ɵɵproperty(\"formGroup\", ctx.repairForm);\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"ngForOf\", ctx.clients);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.repairForm.controls[\"clientId\"].invalid);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"value\", ctx.email);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngIf\", ctx.repairForm.controls[\"description\"].invalid);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"min\", ctx.todayDate)(\"matDatepicker\", _r3);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"for\", _r3);\n        i0.ɵɵadvance(13);\n        i0.ɵɵproperty(\"ngIf\", ctx.repairForm.controls[\"state\"].invalid);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngForOf\", ctx.users);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.repairForm.controls[\"assignedId\"].invalid);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"formGroup\", ctx.articlesForm);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngForOf\", ctx.articles);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.articlesForm.controls[\"id\"].invalid);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.articleSelected);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.articleSelected);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.articleSelected);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.articleSelected);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.articleRepair.length > 0);\n        i0.ɵɵadvance(7);\n        i0.ɵɵtextInterpolate1(\" \", ctx.edit ? \"Mostrar observaciones\" : \"Agregar observaci\\u00F3n\", \" \");\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate2(\"\", ctx.observations.length, \" comentario\", ctx.observations.length == 1 ? \"\" : \"s\", \"\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.edit && ctx.observations && ctx.observations.length > 0);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngIf\", ctx.edit);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\" \", ctx.edit ? \"Actualizar reparaci\\u00F3n\" : \"Crear reparaci\\u00F3n\", \" \");\n      }\n    },\n    directives: [i1.ɵNgNoValidate, i1.NgControlStatusGroup, i1.FormGroupDirective, i6.MatFormField, i6.MatLabel, i7.MatSelect, i1.NgControlStatus, i1.FormControlName, i1.RequiredValidator, i8.MatOption, i9.NgForOf, i9.NgIf, i6.MatError, i10.MatInput, i1.DefaultValueAccessor, i11.MatDatepickerInput, i11.MatDatepickerToggle, i6.MatSuffix, i11.MatDatepicker, i12.MatButton, i13.MatTable, i13.MatColumnDef, i13.MatHeaderCellDef, i13.MatHeaderCell, i13.MatCellDef, i13.MatCell, i14.MatIcon, i13.MatHeaderRowDef, i13.MatHeaderRow, i13.MatRowDef, i13.MatRow, i15.MatAccordion, i15.MatExpansionPanel, i15.MatExpansionPanelHeader, i15.MatExpansionPanelTitle, i16.MatChipList, i16.MatChip],\n    pipes: [i9.DatePipe],\n    styles: [\"mat-form-field[_ngcontent-%COMP%]{margin-right:12px}mat-panel-title[_ngcontent-%COMP%]{font-size:13px;margin-left:5px}table[_ngcontent-%COMP%]{margin:5px 5px 15px;padding:5px 25px}.form[_ngcontent-%COMP%]{margin-top:25px;max-width:750px}.row-form[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;flex-wrap:wrap}.row-input[_ngcontent-%COMP%]{flex-grow:1;margin-right:15px}.row-input[_ngcontent-%COMP%]:last-of-type{margin-right:0}.fieldTextarea[_ngcontent-%COMP%]{width:100%}textarea[_ngcontent-%COMP%]{font-size:12px;line-height:1.5em}.obsContainer[_ngcontent-%COMP%]{background-color:#d4d4d4;border-radius:5px;width:100%;padding:5px 5px 0}.infix[_ngcontent-%COMP%]{margin-bottom:-10px}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.btn-submit[_ngcontent-%COMP%]{margin-top:10px}.btn-article[_ngcontent-%COMP%]{height:35px;margin-top:5px}.btn-obs[_ngcontent-%COMP%]{width:100px;position:absolute;bottom:3px;right:0;background-color:#d4d4d4;height:25px}.mat-chip[_ngcontent-%COMP%]{background-color:#98e098!important;font-size:10px;padding:0 5px}.example-action-buttons[_ngcontent-%COMP%]{padding-bottom:20px}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%], .example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%]{flex-basis:0}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}.example-headers-align[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}\"]\n  });\n  return ManageRepairsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}